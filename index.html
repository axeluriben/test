<!DOCTYPE html>
<html lang = "en">
<head>
	<meta charset = "UTF-8">
	<meta name = "viewport" content = "width=device-width, initial-scale=1.0">
	<meta http-equiv = "X-UA-Compatible" content = "ie=edge">
	<title>Document </title>
	<link rel = "stylesheet" href ="main.css">
</head>
	
<body>
	
			     			 
</body>
											 

											 
<script type="module">
	
	import * as THREE from '/test/build/three.module.js';
	import { OrbitControls } from '/test/OrbitControls.js';	
	import { STLLoader } from '/test/STLLoader.js';
	
   	var scene = new THREE.Scene();

        var camera = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);
        camera.position.y = 15; 
	camera.position.z = 27; //que tan alejada esta la camara de la pantalla o la pieza
        
        var renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setClearColor("#e5e5e5");
        renderer.setSize(window.innerWidth,window.innerHeight);

        document.body.appendChild(renderer.domElement);

        window.addEventListener('resize', () => {
            renderer.setSize(window.innerWidth,window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;

            camera.updateProjectionMatrix();
        })
					
	
	//cargar modelo
	
	var loader = new STLLoader();
	loader.load( './modelos/console.STL', function ( geometry ) {

	var material = new THREE.MeshPhongMaterial( { color: 0xff5533, specular: 0x111111, shininess: 200 } );
	var mesh = new THREE.Mesh( geometry, material );

	mesh.position.set( 10, 2, -8 );
	mesh.rotation.set( 0, - Math.PI / 2, 0 );
	mesh.scale.set( 0.1, 0.1, 0.1 );

	mesh.castShadow = true;
	mesh.receiveShadow = true;

	scene.add( mesh );

	} );
	
	/*
	var light = new THREE.PointLight (0xFFFFFF,1,500);
	light.position.set (10,0,25);
	scene.add(light)
	*/
	
	// nueva luz direccional
	
	var light = new THREE.DirectionalLight( 0xaabbff, 0.3 );
		light.position.x = 500;
		light.position.y = 50;
		light.position.z = 100;
		scene.add( light );
	
	//añade referencia malla
	var size = 50;
	var divisions = 50;
	var grid = new THREE.GridHelper( size, divisions, 0xFF00FF, 0x555555 );
	grid.material.opacity = 0.25;
	grid.material.transparent = true;
	scene.add( grid );
	
	
						
	//añade movimiento del entorno	
	var controls = new OrbitControls( camera, renderer.domElement );
	controls.addEventListener( 'change', render );
	controls.update();
	
	
	//funcion resize
	function onWindowResize() {
	camera.aspect = window.innerWidth / window.innerHeight;
	camera.updateProjectionMatrix();
	renderer.setSize( window.innerWidth, window.innerHeight );
	render();

	}

	
			
	// parte que crea la pieza 				
	var render = function(){
		requestAnimationFrame (render);
		renderer.shadowMap.enabled = true;
		renderer.render (scene,camera);
	}
	
	render ();

</script>
											 
</html>										 
											 
